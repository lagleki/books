@import "tailwindcss";
@plugin "@tailwindcss/typography";

@theme {
  --font-sans: "Inter", ui-sans-serif, system-ui, sans-serif;
  --font-mono: "Roboto Mono", ui-monospace, monospace;

  --max-width-reading: 70ch;
  --max-width-content: 75rem;
}

@custom-variant dark (&:where(.dark, .dark *));

/* Base: readable text and selection */
@layer base {
  html {
    @apply scroll-smooth;
  }
  body {
    @apply antialiased;
  }
  ::selection {
    @apply bg-teal-200 dark:bg-teal-800/80 text-slate-900 dark:text-slate-100;
  }
}

/* Prose and links */
a {
  @apply text-teal-600 hover:text-teal-700 dark:text-teal-400 dark:hover:text-teal-300 hover:underline transition-colors duration-150;
}
.prose a {
  @apply text-teal-600 hover:text-teal-700 dark:text-teal-400 dark:hover:text-teal-300 hover:underline;
}

/* Code blocks: light/dark via .dark class (class-based dark mode) */
pre {
  @apply p-4 rounded-xl overflow-x-auto border border-slate-200 dark:border-slate-600;
}
pre,
.prose pre {
  background-color: var(--color-slate-100);
  color: var(--color-slate-900);
}
:where(.dark) pre,
:where(.dark) .prose pre {
  background-color: var(--color-slate-800);
  color: var(--color-slate-100);
  border-color: var(--color-slate-700);
}

/* Book content: optimal reading width when no sidebar (e.g. narrow viewports) */
.prose {
  @apply max-w-reading;
}
.prose.max-w-none {
  max-width: none;
}

/* Sidebar scrollbar (webkit) */
.overflow-y-auto {
  scrollbar-width: thin;
  scrollbar-color: var(--color-slate-300) transparent;
}
:where(.dark) .overflow-y-auto {
  scrollbar-color: var(--color-slate-600) transparent;
}
.overflow-y-auto::-webkit-scrollbar {
  width: 6px;
}
.overflow-y-auto::-webkit-scrollbar-track {
  background: transparent;
}
.overflow-y-auto::-webkit-scrollbar-thumb {
  @apply bg-slate-300 dark:bg-slate-600 rounded-full;
}
.overflow-y-auto::-webkit-scrollbar-thumb:hover {
  @apply bg-slate-400 dark:bg-slate-500;
}

/* Safe area for notched devices */
.safe-area-padding {
  padding-left: env(safe-area-inset-left, 0);
  padding-right: env(safe-area-inset-right, 0);
}

/* Custom Typography overrides */
.prose {
  --tw-prose-body: inherit;
  --tw-prose-headings: var(--color-slate-900);
  --tw-prose-links: var(--color-teal-600);
  --tw-prose-bold: inherit;
  --tw-prose-counters: var(--color-slate-500);
  --tw-prose-bullets: var(--color-slate-300);
  --tw-prose-hr: var(--color-slate-200);
  --tw-prose-quotes: var(--color-slate-900);
  --tw-prose-quote-borders: var(--color-slate-200);
  --tw-prose-captions: var(--color-slate-500);
  --tw-prose-code: var(--color-slate-900);
  --tw-prose-pre-code: var(--color-slate-100);
  --tw-prose-pre-bg: var(--color-slate-800);
  --tw-prose-th-borders: var(--color-slate-300);
  --tw-prose-td-borders: var(--color-slate-200);
  
  --tw-prose-invert-body: inherit;
  --tw-prose-invert-headings: var(--color-white);
  --tw-prose-invert-links: var(--color-teal-400);
  --tw-prose-invert-bold: inherit;
  --tw-prose-invert-counters: var(--color-slate-400);
  --tw-prose-invert-bullets: var(--color-slate-600);
  --tw-prose-invert-hr: var(--color-slate-700);
  --tw-prose-invert-quotes: var(--color-slate-100);
  --tw-prose-invert-quote-borders: var(--color-slate-700);
  --tw-prose-invert-captions: var(--color-slate-400);
  --tw-prose-invert-code: var(--color-white);
  --tw-prose-invert-pre-code: var(--color-slate-300);
  --tw-prose-invert-pre-bg: rgb(0 0 0 / 50%);
  --tw-prose-invert-th-borders: var(--color-slate-600);
  --tw-prose-invert-td-borders: var(--color-slate-700);
}

.prose h1, .prose h2, .prose h3, .prose h4 {
  @apply font-bold tracking-tight;
}

.prose p {
  @apply leading-relaxed;
}
