<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 3: Data Architecture Deep Dive - Lojban Booker</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Roboto+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style id="tailwind-styles">
        /* *,:after,:before{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }/*! tailwindcss v3.4.17 | MIT License | https://tailwindcss.com*/*,:after,:before{box-sizing:border-box;border:0 solid #e5e7eb}:after,:before{--tw-content:""}:host,html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0}fieldset,legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}.container{width:100%}@media (min-width:640px){.container{max-width:640px}}@media (min-width:768px){.container{max-width:768px}}@media (min-width:1024px){.container{max-width:1024px}}@media (min-width:1280px){.container{max-width:1280px}}@media (min-width:1536px){.container{max-width:1536px}}.prose{color:var(--tw-prose-body);max-width:65ch}.prose :where(p):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.25em;margin-bottom:1.25em;line-height:1.6}.prose :where([class~=lead]):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-lead);font-size:1.25em;line-height:1.6;margin-top:1.2em;margin-bottom:1.2em}.prose :where(a):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-links);text-decoration:none;font-weight:500}.prose :where(a):not(:where([class~=not-prose],[class~=not-prose] *)):hover{text-decoration:underline}.prose :where(strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-bold);font-weight:600}.prose :where(a strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(blockquote strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(thead th strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(ol):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:decimal;margin-top:1.25em;margin-bottom:1.25em;padding-inline-start:1.625em}.prose :where(ol[type=A]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:upper-alpha}.prose :where(ol[type=a]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:lower-alpha}.prose :where(ol[type=A s]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:upper-alpha}.prose :where(ol[type=a s]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:lower-alpha}.prose :where(ol[type=I]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:upper-roman}.prose :where(ol[type=i]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:lower-roman}.prose :where(ol[type=I s]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:upper-roman}.prose :where(ol[type=i s]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:lower-roman}.prose :where(ol[type="1"]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:decimal}.prose :where(ul):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:disc;margin-top:1.25em;margin-bottom:1.25em;padding-inline-start:1.625em}.prose :where(ol>li):not(:where([class~=not-prose],[class~=not-prose] *))::marker{font-weight:400;color:var(--tw-prose-counters)}.prose :where(ul>li):not(:where([class~=not-prose],[class~=not-prose] *))::marker{color:var(--tw-prose-bullets)}.prose :where(dt):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-weight:600;margin-top:1.25em}.prose :where(hr):not(:where([class~=not-prose],[class~=not-prose] *)){border-color:var(--tw-prose-hr);border-top-width:1px;margin-top:3em;margin-bottom:3em}.prose :where(blockquote):not(:where([class~=not-prose],[class~=not-prose] *)){font-weight:500;font-style:italic;color:var(--tw-prose-quotes);border-inline-start-width:.25rem;border-inline-start-color:var(--tw-prose-quote-borders);quotes:"\201C""\201D""\2018""\2019";margin-top:1.6em;margin-bottom:1.6em;padding-inline-start:1em}.prose :where(blockquote p:first-of-type):not(:where([class~=not-prose],[class~=not-prose] *)):before{content:open-quote}.prose :where(blockquote p:last-of-type):not(:where([class~=not-prose],[class~=not-prose] *)):after{content:close-quote}.prose :where(h1):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-weight:800;font-size:2.25em;margin-top:0;margin-bottom:.8888889em;line-height:1.1111111}.prose :where(h1 strong):not(:where([class~=not-prose],[class~=not-prose] *)){font-weight:900;color:inherit}.prose :where(h2):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-weight:700;font-size:1.5em;margin-top:2em;margin-bottom:1em;line-height:1.3333333}.prose :where(h2 strong):not(:where([class~=not-prose],[class~=not-prose] *)){font-weight:800;color:inherit}.prose :where(h3):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-weight:600;font-size:1.25em;margin-top:1.6em;margin-bottom:.6em;line-height:1.6}.prose :where(h3 strong):not(:where([class~=not-prose],[class~=not-prose] *)){font-weight:700;color:inherit}.prose :where(h4):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-weight:600;margin-top:1.5em;margin-bottom:.5em;line-height:1.5}.prose :where(h4 strong):not(:where([class~=not-prose],[class~=not-prose] *)){font-weight:700;color:inherit}.prose :where(img):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:2em;margin-bottom:2em}.prose :where(picture):not(:where([class~=not-prose],[class~=not-prose] *)){display:block;margin-top:2em;margin-bottom:2em}.prose :where(video):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:2em;margin-bottom:2em}.prose :where(kbd):not(:where([class~=not-prose],[class~=not-prose] *)){font-weight:500;font-family:inherit;color:var(--tw-prose-kbd);box-shadow:0 0 0 1px rgb(var(--tw-prose-kbd-shadows)/10%),0 3px 0 rgb(var(--tw-prose-kbd-shadows)/10%);font-size:.875em;border-radius:.3125rem;padding-top:.1875em;padding-inline-end:.375em;padding-bottom:.1875em;padding-inline-start:.375em}.prose :where(code):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-code);font-weight:600;font-size:.875em}.prose :where(code):not(:where([class~=not-prose],[class~=not-prose] *)):before{content:"`"}.prose :where(code):not(:where([class~=not-prose],[class~=not-prose] *)):after{content:"`"}.prose :where(a code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(h1 code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(h2 code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit;font-size:.875em}.prose :where(h3 code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit;font-size:.9em}.prose :where(h4 code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(blockquote code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(thead th code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(pre):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-pre-code);background-color:var(--tw-prose-pre-bg);overflow-x:auto;font-weight:400;font-size:.875em;line-height:1.7142857;margin-top:1.7142857em;margin-bottom:1.7142857em;border-radius:.375rem;padding-top:.8571429em;padding-inline-end:1.1428571em;padding-bottom:.8571429em;padding-inline-start:1.1428571em}.prose :where(pre code):not(:where([class~=not-prose],[class~=not-prose] *)){background-color:transparent;border-width:0;border-radius:0;padding:0;font-weight:inherit;color:inherit;font-size:inherit;font-family:inherit;line-height:inherit}.prose :where(pre code):not(:where([class~=not-prose],[class~=not-prose] *)):before{content:none}.prose :where(pre code):not(:where([class~=not-prose],[class~=not-prose] *)):after{content:none}.prose :where(table):not(:where([class~=not-prose],[class~=not-prose] *)){width:100%;table-layout:auto;margin-top:2em;margin-bottom:2em;font-size:.875em;line-height:1.7142857}.prose :where(thead):not(:where([class~=not-prose],[class~=not-prose] *)){border-bottom-width:1px;border-bottom-color:var(--tw-prose-th-borders)}.prose :where(thead th):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-weight:600;vertical-align:bottom;padding-inline-end:.5714286em;padding-bottom:.5714286em;padding-inline-start:.5714286em}.prose :where(tbody tr):not(:where([class~=not-prose],[class~=not-prose] *)){border-bottom-width:1px;border-bottom-color:var(--tw-prose-td-borders)}.prose :where(tbody tr:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){border-bottom-width:0}.prose :where(tbody td):not(:where([class~=not-prose],[class~=not-prose] *)){vertical-align:baseline}.prose :where(tfoot):not(:where([class~=not-prose],[class~=not-prose] *)){border-top-width:1px;border-top-color:var(--tw-prose-th-borders)}.prose :where(tfoot td):not(:where([class~=not-prose],[class~=not-prose] *)){vertical-align:top}.prose :where(th,td):not(:where([class~=not-prose],[class~=not-prose] *)){text-align:start}.prose :where(figure>*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0;margin-bottom:0}.prose :where(figcaption):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-captions);font-size:.875em;line-height:1.4285714;margin-top:.8571429em}.prose{--tw-prose-body:#374151;--tw-prose-headings:#111827;--tw-prose-lead:#4b5563;--tw-prose-links:#111827;--tw-prose-bold:#111827;--tw-prose-counters:#6b7280;--tw-prose-bullets:#d1d5db;--tw-prose-hr:#e5e7eb;--tw-prose-quotes:#111827;--tw-prose-quote-borders:#e5e7eb;--tw-prose-captions:#6b7280;--tw-prose-kbd:#111827;--tw-prose-kbd-shadows:17 24 39;--tw-prose-code:#111827;--tw-prose-pre-code:#e5e7eb;--tw-prose-pre-bg:#1f2937;--tw-prose-th-borders:#d1d5db;--tw-prose-td-borders:#e5e7eb;--tw-prose-invert-body:#d1d5db;--tw-prose-invert-headings:#fff;--tw-prose-invert-lead:#9ca3af;--tw-prose-invert-links:#fff;--tw-prose-invert-bold:#fff;--tw-prose-invert-counters:#9ca3af;--tw-prose-invert-bullets:#4b5563;--tw-prose-invert-hr:#374151;--tw-prose-invert-quotes:#f3f4f6;--tw-prose-invert-quote-borders:#374151;--tw-prose-invert-captions:#9ca3af;--tw-prose-invert-kbd:#fff;--tw-prose-invert-kbd-shadows:255 255 255;--tw-prose-invert-code:#fff;--tw-prose-invert-pre-code:#d1d5db;--tw-prose-invert-pre-bg:rgba(0,0,0,.5);--tw-prose-invert-th-borders:#4b5563;--tw-prose-invert-td-borders:#374151;font-size:1rem;line-height:1.75}.prose :where(picture>img):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0;margin-bottom:0}.prose :where(li):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.5em;margin-bottom:.5em}.prose :where(ol>li):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:.375em}.prose :where(ul>li):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:.375em}.prose :where(.prose>ul>li p):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.75em;margin-bottom:.75em}.prose :where(.prose>ul>li>p:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.25em}.prose :where(.prose>ul>li>p:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.25em}.prose :where(.prose>ol>li>p:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.25em}.prose :where(.prose>ol>li>p:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.25em}.prose :where(ul ul,ul ol,ol ul,ol ol):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.75em;margin-bottom:.75em}.prose :where(dl):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.25em;margin-bottom:1.25em}.prose :where(dd):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.5em;padding-inline-start:1.625em}.prose :where(hr+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose :where(h2+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose :where(h3+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose :where(h4+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose :where(thead th:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:0}.prose :where(thead th:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-end:0}.prose :where(tbody td,tfoot td):not(:where([class~=not-prose],[class~=not-prose] *)){padding-top:.5714286em;padding-inline-end:.5714286em;padding-bottom:.5714286em;padding-inline-start:.5714286em}.prose :where(tbody td:first-child,tfoot td:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:0}.prose :where(tbody td:last-child,tfoot td:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-end:0}.prose :where(figure):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:2em;margin-bottom:2em}.prose :where(.prose>:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose :where(.prose>:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:0}.prose :where(h1,h2,h3,h4):not(:where([class~=not-prose],[class~=not-prose] *)){font-weight:700;letter-spacing:-.025em}.prose-lg{font-size:1.125rem;line-height:1.7777778}.prose-lg :where(p):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.3333333em;margin-bottom:1.3333333em}.prose-lg :where([class~=lead]):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:1.2222222em;line-height:1.4545455;margin-top:1.0909091em;margin-bottom:1.0909091em}.prose-lg :where(blockquote):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.6666667em;margin-bottom:1.6666667em;padding-inline-start:1em}.prose-lg :where(h1):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:2.6666667em;margin-top:0;margin-bottom:.8333333em;line-height:1}.prose-lg :where(h2):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:1.6666667em;margin-top:1.8666667em;margin-bottom:1.0666667em;line-height:1.3333333}.prose-lg :where(h3):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:1.3333333em;margin-top:1.6666667em;margin-bottom:.6666667em;line-height:1.5}.prose-lg :where(h4):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.7777778em;margin-bottom:.4444444em;line-height:1.5555556}.prose-lg :where(img):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.7777778em;margin-bottom:1.7777778em}.prose-lg :where(picture):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.7777778em;margin-bottom:1.7777778em}.prose-lg :where(picture>img):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0;margin-bottom:0}.prose-lg :where(video):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.7777778em;margin-bottom:1.7777778em}.prose-lg :where(kbd):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.8888889em;border-radius:.3125rem;padding-top:.2222222em;padding-inline-end:.4444444em;padding-bottom:.2222222em;padding-inline-start:.4444444em}.prose-lg :where(code):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.8888889em}.prose-lg :where(h2 code):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.8666667em}.prose-lg :where(h3 code):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.875em}.prose-lg :where(pre):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.8888889em;line-height:1.75;margin-top:2em;margin-bottom:2em;border-radius:.375rem;padding-top:1em;padding-inline-end:1.5em;padding-bottom:1em;padding-inline-start:1.5em}.prose-lg :where(ol):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.3333333em;margin-bottom:1.3333333em;padding-inline-start:1.5555556em}.prose-lg :where(ul):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.3333333em;margin-bottom:1.3333333em;padding-inline-start:1.5555556em}.prose-lg :where(li):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.6666667em;margin-bottom:.6666667em}.prose-lg :where(ol>li):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:.4444444em}.prose-lg :where(ul>li):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:.4444444em}.prose-lg :where(.prose-lg>ul>li p):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.8888889em;margin-bottom:.8888889em}.prose-lg :where(.prose-lg>ul>li>p:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.3333333em}.prose-lg :where(.prose-lg>ul>li>p:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.3333333em}.prose-lg :where(.prose-lg>ol>li>p:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.3333333em}.prose-lg :where(.prose-lg>ol>li>p:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.3333333em}.prose-lg :where(ul ul,ul ol,ol ul,ol ol):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.8888889em;margin-bottom:.8888889em}.prose-lg :where(dl):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.3333333em;margin-bottom:1.3333333em}.prose-lg :where(dt):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.3333333em}.prose-lg :where(dd):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.6666667em;padding-inline-start:1.5555556em}.prose-lg :where(hr):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:3.1111111em;margin-bottom:3.1111111em}.prose-lg :where(hr+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose-lg :where(h2+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose-lg :where(h3+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose-lg :where(h4+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose-lg :where(table):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.8888889em;line-height:1.5}.prose-lg :where(thead th):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-end:.75em;padding-bottom:.75em;padding-inline-start:.75em}.prose-lg :where(thead th:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:0}.prose-lg :where(thead th:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-end:0}.prose-lg :where(tbody td,tfoot td):not(:where([class~=not-prose],[class~=not-prose] *)){padding-top:.75em;padding-inline-end:.75em;padding-bottom:.75em;padding-inline-start:.75em}.prose-lg :where(tbody td:first-child,tfoot td:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:0}.prose-lg :where(tbody td:last-child,tfoot td:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-end:0}.prose-lg :where(figure):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.7777778em;margin-bottom:1.7777778em}.prose-lg :where(figure>*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0;margin-bottom:0}.prose-lg :where(figcaption):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.8888889em;line-height:1.5;margin-top:1em}.prose-lg :where(.prose-lg>:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose-lg :where(.prose-lg>:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:0}.visible{visibility:visible}.static{position:static}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.sticky{position:sticky}.inset-0{inset:0}.inset-y-0{top:0;bottom:0}.bottom-6{bottom:1.5rem}.left-0{left:0}.right-6{right:1.5rem}.top-0{top:0}.top-\[calc\(var\(--header-height\2c 60px\)_\+_1\.5rem\)\]{top:calc(var(--header-height,60px) + 1.5rem)}.isolate{isolation:isolate}.z-50{z-index:50}.z-\[55\]{z-index:55}.z-\[60\]{z-index:60}.m-0{margin:0}.mx-4{margin-left:1rem;margin-right:1rem}.mx-auto{margin-left:auto;margin-right:auto}.-ml-2{margin-left:-.5rem}.-mr-2{margin-right:-.5rem}.mb-0{margin-bottom:0}.mb-10{margin-bottom:2.5rem}.mb-3{margin-bottom:.75rem}.mb-6{margin-bottom:1.5rem}.mt-1{margin-top:.25rem}.mt-12{margin-top:3rem}.mt-2{margin-top:.5rem}.mt-3{margin-top:.75rem}.mt-8{margin-top:2rem}.mt-auto{margin-top:auto}.block{display:block}.inline{display:inline}.flex{display:flex}.table{display:table}.grid{display:grid}.contents{display:contents}.hidden{display:none}.h-5{height:1.25rem}.h-6{height:1.5rem}.max-h-\[calc\(100vh_-_var\(--header-height\2c 60px\)_-_3rem\)\]{max-height:calc(100vh - var(--header-height,60px) - 3rem)}.min-h-screen{min-height:100vh}.w-5{width:1.25rem}.w-6{width:1.5rem}.w-72{width:18rem}.w-full{width:100%}.min-w-0{min-width:0}.max-w-3xl{max-width:48rem}.max-w-4xl{max-width:56rem}.max-w-\[150px\]{max-width:150px}.max-w-none{max-width:none}.flex-1{flex:1 1 0%}.flex-shrink-0{flex-shrink:0}.flex-grow{flex-grow:1}.-translate-x-full{--tw-translate-x:-100%}.-translate-x-full,.translate-x-0{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-x-0{--tw-translate-x:0px}.translate-y-0{--tw-translate-y:0px}.translate-y-0,.translate-y-4{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-y-4{--tw-translate-y:1rem}.transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.resize{resize:both}.list-none{list-style-type:none}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.flex-col{flex-direction:column}.items-center{align-items:center}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-6{gap:1.5rem}.space-x-2>:not([hidden])~:not([hidden]){--tw-space-x-reverse:0;margin-right:calc(.5rem*var(--tw-space-x-reverse));margin-left:calc(.5rem*(1 - var(--tw-space-x-reverse)))}.space-x-3>:not([hidden])~:not([hidden]){--tw-space-x-reverse:0;margin-right:calc(.75rem*var(--tw-space-x-reverse));margin-left:calc(.75rem*(1 - var(--tw-space-x-reverse)))}.space-y-4>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-top:calc(1rem*(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem*var(--tw-space-y-reverse))}.self-start{align-self:flex-start}.overflow-hidden{overflow:hidden}.overflow-y-auto{overflow-y:auto}.scroll-smooth{scroll-behavior:smooth}.truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:.5rem}.rounded-md{border-radius:.375rem}.rounded-none{border-radius:0}.border{border-width:1px}.border-l{border-left-width:1px}.border-t{border-top-width:1px}.border-gray-200{--tw-border-opacity:1;border-color:rgb(229 231 235/var(--tw-border-opacity,1))}.border-slate-200{--tw-border-opacity:1;border-color:rgb(226 232 240/var(--tw-border-opacity,1))}.bg-black{--tw-bg-opacity:1;background-color:rgb(0 0 0/var(--tw-bg-opacity,1))}.bg-blue-600{--tw-bg-opacity:1;background-color:rgb(37 99 235/var(--tw-bg-opacity,1))}.bg-gray-100{--tw-bg-opacity:1;background-color:rgb(243 244 246/var(--tw-bg-opacity,1))}.bg-gray-50{--tw-bg-opacity:1;background-color:rgb(249 250 251/var(--tw-bg-opacity,1))}.bg-slate-100{--tw-bg-opacity:1;background-color:rgb(241 245 249/var(--tw-bg-opacity,1))}.bg-slate-50{--tw-bg-opacity:1;background-color:rgb(248 250 252/var(--tw-bg-opacity,1))}.bg-transparent{background-color:transparent}.bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255/var(--tw-bg-opacity,1))}.bg-white\/95{background-color:hsla(0,0%,100%,.95)}.bg-opacity-50{--tw-bg-opacity:0.5}.p-0{padding:0}.p-2{padding:.5rem}.p-3{padding:.75rem}.p-4{padding:1rem}.p-6{padding:1.5rem}.px-3{padding-left:.75rem;padding-right:.75rem}.px-4{padding-left:1rem;padding-right:1rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.py-3{padding-top:.75rem;padding-bottom:.75rem}.py-4{padding-top:1rem;padding-bottom:1rem}.py-6{padding-top:1.5rem;padding-bottom:1.5rem}.py-8{padding-top:2rem;padding-bottom:2rem}.pl-3{padding-left:.75rem}.pr-6{padding-right:1.5rem}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.text-2xl{font-size:1.5rem;line-height:2rem}.text-4xl{font-size:2.25rem;line-height:2.5rem}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.font-bold{font-weight:700}.font-semibold{font-weight:600}.uppercase{text-transform:uppercase}.lowercase{text-transform:lowercase}.leading-tight{line-height:1.25}.tracking-wider{letter-spacing:.05em}.text-blue-600{--tw-text-opacity:1;color:rgb(37 99 235/var(--tw-text-opacity,1))}.text-gray-400{--tw-text-opacity:1;color:rgb(156 163 175/var(--tw-text-opacity,1))}.text-gray-500{--tw-text-opacity:1;color:rgb(107 114 128/var(--tw-text-opacity,1))}.text-gray-600{--tw-text-opacity:1;color:rgb(75 85 99/var(--tw-text-opacity,1))}.text-gray-800{--tw-text-opacity:1;color:rgb(31 41 55/var(--tw-text-opacity,1))}.text-green-400{--tw-text-opacity:1;color:rgb(74 222 128/var(--tw-text-opacity,1))}.text-green-600{--tw-text-opacity:1;color:rgb(22 163 74/var(--tw-text-opacity,1))}.text-red-400{--tw-text-opacity:1;color:rgb(248 113 113/var(--tw-text-opacity,1))}.text-red-500{--tw-text-opacity:1;color:rgb(239 68 68/var(--tw-text-opacity,1))}.text-slate-500{--tw-text-opacity:1;color:rgb(100 116 139/var(--tw-text-opacity,1))}.text-slate-600{--tw-text-opacity:1;color:rgb(71 85 105/var(--tw-text-opacity,1))}.text-slate-800{--tw-text-opacity:1;color:rgb(30 41 59/var(--tw-text-opacity,1))}.text-slate-900{--tw-text-opacity:1;color:rgb(15 23 42/var(--tw-text-opacity,1))}.text-teal-600{--tw-text-opacity:1;color:rgb(13 148 136/var(--tw-text-opacity,1))}.text-white{--tw-text-opacity:1;color:rgb(255 255 255/var(--tw-text-opacity,1))}.text-yellow-500{--tw-text-opacity:1;color:rgb(234 179 8/var(--tw-text-opacity,1))}.antialiased{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.opacity-0{opacity:0}.opacity-100{opacity:1}.shadow{--tw-shadow:0 1px 3px 0 rgba(0,0,0,.1),0 1px 2px -1px rgba(0,0,0,.1);--tw-shadow-colored:0 1px 3px 0 var(--tw-shadow-color),0 1px 2px -1px var(--tw-shadow-color)}.shadow,.shadow-lg{box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.shadow-lg{--tw-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -4px rgba(0,0,0,.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color),0 4px 6px -4px var(--tw-shadow-color)}.shadow-md{--tw-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -2px rgba(0,0,0,.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color),0 2px 4px -2px var(--tw-shadow-color)}.shadow-md,.shadow-none{box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.shadow-none{--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000}.shadow-xl{--tw-shadow:0 20px 25px -5px rgba(0,0,0,.1),0 8px 10px -6px rgba(0,0,0,.1);--tw-shadow-colored:0 20px 25px -5px var(--tw-shadow-color),0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.outline{outline-style:solid}.grayscale{--tw-grayscale:grayscale(100%)}.filter,.grayscale{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.backdrop-blur-sm{--tw-backdrop-blur:blur(4px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.transition{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-colors{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-opacity{transition-property:opacity;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-shadow{transition-property:box-shadow;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-transform{transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1)}.duration-150,.transition-transform{transition-duration:.15s}.duration-200{transition-duration:.2s}.duration-300{transition-duration:.3s}.ease-in-out{transition-timing-function:cubic-bezier(.4,0,.2,1)}.\[b\:2\]{b:2}a{color:rgb(13 148 136/var(--tw-text-opacity,1))}a,a:hover{--tw-text-opacity:1}a:hover{color:rgb(15 118 110/var(--tw-text-opacity,1));text-decoration-line:underline}.prose a{--tw-text-opacity:1;color:rgb(13 148 136/var(--tw-text-opacity,1))}.prose a:hover{--tw-text-opacity:1;color:rgb(15 118 110/var(--tw-text-opacity,1));text-decoration-line:underline}pre{overflow-x:auto;border-radius:.5rem;padding:1rem}@media (prefers-color-scheme:dark){pre{background-color:#1e293b;color:#f8fafc}}@media (prefers-color-scheme:light){pre{background-color:#f1f5f9;color:#0f172a}}.dark\:prose-invert:is(.dark *){--tw-prose-body:var(--tw-prose-invert-body);--tw-prose-headings:var(--tw-prose-invert-headings);--tw-prose-lead:var(--tw-prose-invert-lead);--tw-prose-links:var(--tw-prose-invert-links);--tw-prose-bold:var(--tw-prose-invert-bold);--tw-prose-counters:var(--tw-prose-invert-counters);--tw-prose-bullets:var(--tw-prose-invert-bullets);--tw-prose-hr:var(--tw-prose-invert-hr);--tw-prose-quotes:var(--tw-prose-invert-quotes);--tw-prose-quote-borders:var(--tw-prose-invert-quote-borders);--tw-prose-captions:var(--tw-prose-invert-captions);--tw-prose-kbd:var(--tw-prose-invert-kbd);--tw-prose-kbd-shadows:var(--tw-prose-invert-kbd-shadows);--tw-prose-code:var(--tw-prose-invert-code);--tw-prose-pre-code:var(--tw-prose-invert-pre-code);--tw-prose-pre-bg:var(--tw-prose-invert-pre-bg);--tw-prose-th-borders:var(--tw-prose-invert-th-borders);--tw-prose-td-borders:var(--tw-prose-invert-td-borders)}@media (min-width:1024px){.lg\:prose-xl{font-size:1.25rem;line-height:1.8}.lg\:prose-xl :where(p):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.2em;margin-bottom:1.2em}.lg\:prose-xl :where([class~=lead]):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:1.2em;line-height:1.5;margin-top:1em;margin-bottom:1em}.lg\:prose-xl :where(blockquote):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.6em;margin-bottom:1.6em;padding-inline-start:1.0666667em}.lg\:prose-xl :where(h1):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:2.8em;margin-top:0;margin-bottom:.8571429em;line-height:1}.lg\:prose-xl :where(h2):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:1.8em;margin-top:1.5555556em;margin-bottom:.8888889em;line-height:1.1111111}.lg\:prose-xl :where(h3):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:1.5em;margin-top:1.6em;margin-bottom:.6666667em;line-height:1.3333333}.lg\:prose-xl :where(h4):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.8em;margin-bottom:.6em;line-height:1.6}.lg\:prose-xl :where(img):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:2em;margin-bottom:2em}.lg\:prose-xl :where(picture):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:2em;margin-bottom:2em}.lg\:prose-xl :where(picture>img):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0;margin-bottom:0}.lg\:prose-xl :where(video):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:2em;margin-bottom:2em}.lg\:prose-xl :where(kbd):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.9em;border-radius:.3125rem;padding-top:.25em;padding-inline-end:.4em;padding-bottom:.25em;padding-inline-start:.4em}.lg\:prose-xl :where(code):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.9em}.lg\:prose-xl :where(h2 code):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.8611111em}.lg\:prose-xl :where(h3 code):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.9em}.lg\:prose-xl :where(pre):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.9em;line-height:1.7777778;margin-top:2em;margin-bottom:2em;border-radius:.5rem;padding-top:1.1111111em;padding-inline-end:1.3333333em;padding-bottom:1.1111111em;padding-inline-start:1.3333333em}.lg\:prose-xl :where(ol):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.2em;margin-bottom:1.2em;padding-inline-start:1.6em}.lg\:prose-xl :where(ul):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.2em;margin-bottom:1.2em;padding-inline-start:1.6em}.lg\:prose-xl :where(li):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.6em;margin-bottom:.6em}.lg\:prose-xl :where(ol>li):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:.4em}.lg\:prose-xl :where(ul>li):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:.4em}.lg\:prose-xl :where(.lg\:prose-xl>ul>li p):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.8em;margin-bottom:.8em}.lg\:prose-xl :where(.lg\:prose-xl>ul>li>p:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.2em}.lg\:prose-xl :where(.lg\:prose-xl>ul>li>p:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.2em}.lg\:prose-xl :where(.lg\:prose-xl>ol>li>p:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.2em}.lg\:prose-xl :where(.lg\:prose-xl>ol>li>p:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.2em}.lg\:prose-xl :where(ul ul,ul ol,ol ul,ol ol):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.8em;margin-bottom:.8em}.lg\:prose-xl :where(dl):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.2em;margin-bottom:1.2em}.lg\:prose-xl :where(dt):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.2em}.lg\:prose-xl :where(dd):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.6em;padding-inline-start:1.6em}.lg\:prose-xl :where(hr):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:2.8em;margin-bottom:2.8em}.lg\:prose-xl :where(hr+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.lg\:prose-xl :where(h2+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.lg\:prose-xl :where(h3+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.lg\:prose-xl :where(h4+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.lg\:prose-xl :where(table):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.9em;line-height:1.5555556}.lg\:prose-xl :where(thead th):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-end:.6666667em;padding-bottom:.8888889em;padding-inline-start:.6666667em}.lg\:prose-xl :where(thead th:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:0}.lg\:prose-xl :where(thead th:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-end:0}.lg\:prose-xl :where(tbody td,tfoot td):not(:where([class~=not-prose],[class~=not-prose] *)){padding-top:.8888889em;padding-inline-end:.6666667em;padding-bottom:.8888889em;padding-inline-start:.6666667em}.lg\:prose-xl :where(tbody td:first-child,tfoot td:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:0}.lg\:prose-xl :where(tbody td:last-child,tfoot td:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-end:0}.lg\:prose-xl :where(figure):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:2em;margin-bottom:2em}.lg\:prose-xl :where(figure>*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0;margin-bottom:0}.lg\:prose-xl :where(figcaption):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.9em;line-height:1.5555556;margin-top:1em}.lg\:prose-xl :where(.lg\:prose-xl>:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.lg\:prose-xl :where(.lg\:prose-xl>:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:0}}.hover\:bg-blue-700:hover{--tw-bg-opacity:1;background-color:rgb(29 78 216/var(--tw-bg-opacity,1))}.hover\:bg-gray-200:hover{--tw-bg-opacity:1;background-color:rgb(229 231 235/var(--tw-bg-opacity,1))}.hover\:text-teal-500:hover{--tw-text-opacity:1;color:rgb(20 184 166/var(--tw-text-opacity,1))}.hover\:text-teal-600:hover{--tw-text-opacity:1;color:rgb(13 148 136/var(--tw-text-opacity,1))}.hover\:text-teal-700:hover{--tw-text-opacity:1;color:rgb(15 118 110/var(--tw-text-opacity,1))}.hover\:text-teal-800:hover{--tw-text-opacity:1;color:rgb(17 94 89/var(--tw-text-opacity,1))}.hover\:shadow-xl:hover{--tw-shadow:0 20px 25px -5px rgba(0,0,0,.1),0 8px 10px -6px rgba(0,0,0,.1);--tw-shadow-colored:0 20px 25px -5px var(--tw-shadow-color),0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.dark\:border-slate-700:is(.dark *){--tw-border-opacity:1;border-color:rgb(51 65 85/var(--tw-border-opacity,1))}.dark\:bg-slate-700:is(.dark *){--tw-bg-opacity:1;background-color:rgb(51 65 85/var(--tw-bg-opacity,1))}.dark\:bg-slate-800:is(.dark *){--tw-bg-opacity:1;background-color:rgb(30 41 59/var(--tw-bg-opacity,1))}.dark\:bg-slate-900:is(.dark *){--tw-bg-opacity:1;background-color:rgb(15 23 42/var(--tw-bg-opacity,1))}.dark\:bg-slate-900\/80:is(.dark *){background-color:rgba(15,23,42,.8)}.dark\:text-gray-300:is(.dark *){--tw-text-opacity:1;color:rgb(209 213 219/var(--tw-text-opacity,1))}.dark\:text-gray-400:is(.dark *){--tw-text-opacity:1;color:rgb(156 163 175/var(--tw-text-opacity,1))}.dark\:text-green-400:is(.dark *){--tw-text-opacity:1;color:rgb(74 222 128/var(--tw-text-opacity,1))}.dark\:text-red-400:is(.dark *){--tw-text-opacity:1;color:rgb(248 113 113/var(--tw-text-opacity,1))}.dark\:text-slate-100:is(.dark *){--tw-text-opacity:1;color:rgb(241 245 249/var(--tw-text-opacity,1))}.dark\:text-slate-200:is(.dark *){--tw-text-opacity:1;color:rgb(226 232 240/var(--tw-text-opacity,1))}.dark\:text-slate-300:is(.dark *){--tw-text-opacity:1;color:rgb(203 213 225/var(--tw-text-opacity,1))}.dark\:text-slate-400:is(.dark *){--tw-text-opacity:1;color:rgb(148 163 184/var(--tw-text-opacity,1))}.dark\:text-teal-400:is(.dark *){--tw-text-opacity:1;color:rgb(45 212 191/var(--tw-text-opacity,1))}.dark\:text-white:is(.dark *){--tw-text-opacity:1;color:rgb(255 255 255/var(--tw-text-opacity,1))}.dark\:text-yellow-400:is(.dark *){--tw-text-opacity:1;color:rgb(250 204 21/var(--tw-text-opacity,1))}.dark\:hover\:bg-slate-700:hover:is(.dark *){--tw-bg-opacity:1;background-color:rgb(51 65 85/var(--tw-bg-opacity,1))}.dark\:hover\:text-teal-300:hover:is(.dark *){--tw-text-opacity:1;color:rgb(94 234 212/var(--tw-text-opacity,1))}.dark\:hover\:text-teal-400:hover:is(.dark *){--tw-text-opacity:1;color:rgb(45 212 191/var(--tw-text-opacity,1))}@media (min-width:640px){.sm\:flex{display:flex}.sm\:w-80{width:20rem}.sm\:max-w-xs{max-width:20rem}.sm\:flex-row{flex-direction:row}.sm\:space-x-3>:not([hidden])~:not([hidden]){--tw-space-x-reverse:0;margin-right:calc(.75rem*var(--tw-space-x-reverse));margin-left:calc(.75rem*(1 - var(--tw-space-x-reverse)))}.sm\:space-y-0>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-top:calc(0px*(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0px*var(--tw-space-y-reverse))}.sm\:p-8{padding:2rem}.sm\:px-6{padding-left:1.5rem;padding-right:1.5rem}.sm\:py-12{padding-top:3rem;padding-bottom:3rem}.sm\:py-4{padding-top:1rem;padding-bottom:1rem}.sm\:py-8{padding-top:2rem;padding-bottom:2rem}.sm\:text-2xl{font-size:1.5rem;line-height:2rem}.sm\:text-5xl{font-size:3rem;line-height:1}}@media (min-width:768px){.md\:max-w-sm{max-width:24rem}}@media (min-width:1024px){.lg\:col-start-1{grid-column-start:1}.lg\:col-start-2{grid-column-start:2}.lg\:row-start-1{grid-row-start:1}.lg\:block{display:block}.lg\:hidden{display:none}.lg\:grid-cols-\[75\%_25\%\]{grid-template-columns:75% 25%}.lg\:space-x-4>:not([hidden])~:not([hidden]){--tw-space-x-reverse:0;margin-right:calc(1rem*var(--tw-space-x-reverse));margin-left:calc(1rem*(1 - var(--tw-space-x-reverse)))}.lg\:px-8{padding-left:2rem;padding-right:2rem}}@media (min-width:1280px){.xl\:pr-8{padding-right:2rem}} */
        body {
            font-family: 'Inter', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            font-size: 18px;
            line-height: 1.8;
        }
        .prose {
            font-size: 18px;
            line-height: 1.8;
        }
        .prose code {
            font-family: 'Roboto Mono', monospace;
            font-size: 16px;
        }
        .prose pre {
            font-family: 'Roboto Mono', monospace;
            font-size: 16px;
            background-color: #f8fafc;
            border: 1px solid #e2e8f0;
            color: #1e293b;
            border-radius: 0.375rem;
            padding: 1em;
            overflow-x: auto;
            line-height: 1.6;
        }
        .dark .prose pre {
            background-color: #1e293b;
            border-color: #334155;
            color: #f1f5f9;
        }
        .prose h1, .prose h2, .prose h3, .prose h4, .prose h5, .prose h6 {
            font-weight: 700;
            letter-spacing: -0.025em;
        }
        .prose details {
            background-color: #f9fafb; border: 1px solid #e5e7eb;
            border-radius: 0.375rem; padding: 1rem; margin-bottom: 1rem;
        }
        .prose summary { font-weight: 600; cursor: pointer; outline: none; }
        .prose summary:focus-visible { box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.5); }
        .prose details[open] > summary { margin-bottom: 0.5rem; }
        .nav-link { @apply text-teal-600 hover:text-teal-800 text-decoration: none transition-colors duration-150; }
        .nav-link-disabled { @apply text-gray-400 cursor-not-allowed; }

        .toc-container nav.toc { @apply p-0 m-0 bg-transparent shadow-none rounded-none my-0; }
        .toc-container nav.toc > ul { @apply list-none p-0 m-0; }
        .toc-container nav.toc > ul > li { @apply mb-1; }
        .toc-container nav.toc > ul > li > a {
            @apply text-slate-600 dark:text-slate-300 hover:text-teal-500 dark:hover:text-teal-400 text-sm font-medium;
            @apply transition-colors duration-150 block py-3 rounded-md px-3;
        }
        .toc-container nav.toc > ul > li > a:hover {
            @apply bg-slate-100 dark:bg-slate-700;
            transform: translateX(2px);
        }
        .toc-container nav.toc > ul > li > ul { @apply list-none pl-3 mt-1 border-l border-slate-200 dark:border-slate-700 ml-2; }
        .toc-container nav.toc > ul > li > ul > li { @apply mb-0.5; }
        .toc-container nav.toc > ul > li > ul > li > a {
            @apply text-slate-600 dark:text-slate-400 hover:text-teal-600 dark:hover:text-teal-400 text-xs;
            @apply transition-colors duration-150 block py-2 px-3 rounded-md;
        }
        .toc-container nav.toc > ul > li > ul > li > a:hover {
            @apply bg-slate-100 dark:bg-slate-700;
            transform: translateX(2px);
        }
        .toc-container nav.toc a.active {
            @apply text-white dark:text-white font-semibold bg-blue-600 dark:bg-blue-700;
            transform: translateX(4px);
        }
        .toc-container nav.toc > ul > li > details > summary {
            @apply text-slate-600 dark:text-slate-400 hover:text-teal-600 dark:hover:text-teal-400 text-sm font-medium;
            @apply transition-colors duration-150 block py-3 rounded-md px-3 cursor-pointer;
            list-style: none;
        }
        .toc-container nav.toc > ul > li > details > summary::-webkit-details-marker {
            display: none;
        }
        .toc-container nav.toc > ul > li > details > summary:hover {
            @apply bg-slate-100 dark:bg-slate-700;
            transform: translateX(2px);
        }
        .toc-container nav.toc > ul > li > details[open] > summary {
            @apply text-blue-600 dark:text-blue-400;
        }
        
        body.overflow-hidden-important { overflow: hidden !important; }

        #scrollToTopBtn {
            @apply fixed bottom-6 right-6 p-3 bg-blue-600 text-white rounded-full shadow-lg hover:bg-blue-700 transition-all duration-300 ease-in-out z-50;
            @apply opacity-0 translate-y-4 pointer-events-none; /* Initially hidden and off-screen */
        }
        #scrollToTopBtn.visible {
            @apply opacity-100 translate-y-0 pointer-events-auto; /* Visible and on-screen */
        }
        @media (max-width: 768px) {
            body {
                overflow-x: hidden;
            }
            #mobile-toc-panel {
                position: sticky;
                top: var(--header-height);
                height: calc(100vh - var(--header-height));
                z-index: 40;
            }
            #mobile-toc-overlay {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background-color: rgba(0,0,0,0.5);
                z-index: 55;
                opacity: 0;
                transition: opacity 0.3s ease-in-out;
            }
            #mobileMenuButton {
                display: block;
            }
        }
    </style>
</head>
<body class="bg-white text-gray-800 dark:bg-slate-900 dark:text-slate-200 min-h-screen flex flex-col transition-colors duration-300">

    <header id="page-header" class="sticky top-0 z-50 bg-white/95 dark:bg-slate-900/80 backdrop-blur-sm shadow-md transition-colors duration-300">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-3 sm:py-4">
                <!-- Left: Mobile Menu & Title -->
                <div class="flex items-center space-x-2 sm:space-x-3 flex-shrink-0">
                    <button id="mobileMenuButton" aria-label="Open table of contents" class="lg:hidden p-2 -ml-2 rounded-md text-slate-600 dark:text-slate-300 hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
                    </button>
                    <h1 class="text-xl sm:text-2xl font-bold text-slate-800 dark:text-slate-100 leading-tight truncate max-w-[150px] sm:max-w-xs md:max-w-sm">
                        <a href="../index.html" class="hover:text-teal-600 dark:hover:text-teal-400 transition-colors">Chapter 3: Data Architecture Deep Dive</a>
                    </h1>
                </div>

                <!-- Center: Main Navigation Links (visible sm and up) -->
                <nav class="hidden sm:flex flex-grow justify-center items-center space-x-3 lg:space-x-4 mx-4">
                    <span class="nav-link-item text-sm"><a href="chapter2-core-concepts.html" class="nav-link">Previous</a></span>
                    <span class="nav-link-item text-sm"><a href="index.html" class="nav-link">Table of Contents</a></span>
                    <span class="nav-link-item text-sm"><a href="chapter4-architectural-patterns.html" class="nav-link">Next</a></span>
                </nav>

                <!-- Right: Dark Mode Toggle -->
                <div class="flex items-center flex-shrink-0">
                    <button id="darkModeToggle" aria-label="Toggle dark mode" class="p-2 rounded-md text-slate-600 dark:text-slate-300 hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors">
                        <svg id="theme-toggle-dark-icon" class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg>
                        <svg id="theme-toggle-light-icon" class="hidden w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm-.707 10.607a1 1 0 011.414-1.414l-.707-.707a1 1 0 01-1.414 1.414l.707.707zm12.728 0l-.707-.707a1 1 0 00-1.414 1.414l.707.707a1 1 0 001.414-1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" fill-rule="evenodd" clip-rule="evenodd"></path></svg>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <div class="flex-grow container mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8 w-full grid grid-cols-1 lg:grid-cols-[75%_25%] gap-6">
        <aside id="desktop-toc-sidebar" class="hidden lg:block lg:col-start-2 lg:row-start-1 flex-shrink-0 pr-6 xl:pr-8 py-4 sticky top-[calc(var(--header-height,60px)_+_1.5rem)] self-start max-h-[calc(100vh_-_var(--header-height,60px)_-_3rem)] overflow-y-auto scrollbar-thin scrollbar-thumb-slate-300 dark:scrollbar-thumb-slate-600 scrollbar-track-transparent">
            <h3 class="text-sm font-semibold mb-3 text-slate-500 dark:text-slate-400 uppercase tracking-wider">On this page</h3>
            <div class="toc-container">
                <div class="toc"><ul><li class="toc-item toc-level-1"><a class="toc-link" href="#chapter-3-data-architecture-deep-dive">Chapter 3: Data Architecture Deep Dive</a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sql-vs-nosql-decision-matrix">SQL vs. NoSQL Decision Matrix</a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#-postgresql-vs-mongodb"> PostgreSQL vs. MongoDB</a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#postgresql-the-reliable-workhorse-">PostgreSQL (The Reliable Workhorse)</a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mongodb-the-flexible-scaler-">MongoDB (The Flexible Scaler)</a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#-cassandra-wide-column-stores"> Cassandra &amp; Wide-Column Stores</a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#case-study-discord-s-migration">Case Study: Discords Migration</a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#-interview-q-a"> Interview Q&amp;A</a></li></ul></div>
            </div>
            <script type="application/json" id="toc-data">
                [{"level":1,"content":"Chapter 3: Data Architecture Deep Dive","anchor":"chapter-3-data-architecture-deep-dive"},{"level":2,"content":"SQL vs. NoSQL Decision Matrix","anchor":"sql-vs-nosql-decision-matrix"},{"level":2,"content":" PostgreSQL vs. MongoDB","anchor":"-postgresql-vs-mongodb"},{"level":3,"content":"PostgreSQL (The Reliable Workhorse)","anchor":"postgresql-the-reliable-workhorse-"},{"level":3,"content":"MongoDB (The Flexible Scaler)","anchor":"mongodb-the-flexible-scaler-"},{"level":2,"content":" Cassandra & Wide-Column Stores","anchor":"-cassandra-wide-column-stores"},{"level":3,"content":"Case Study: Discords Migration","anchor":"case-study-discord-s-migration"},{"level":2,"content":" Interview Q&A","anchor":"-interview-q-a"}]
            </script>
        </aside>

        <main class="prose prose-lg lg:prose-xl dark:prose-invert max-w-none lg:col-start-1 lg:row-start-1 min-w-0">
            <h1 tabindex="-1" id="chapter-3-data-architecture-deep-dive"><a href="#chapter-3-data-architecture-deep-dive" class="header-anchor">Chapter 3: Data Architecture Deep Dive</a></h1>
<p>This is often the make or break section of the interview. A generic Ill use a database answer is a guaranteed fail. You must define <em>which</em> database and <em>why</em>.</p>
<h2 tabindex="-1" id="sql-vs-nosql-decision-matrix"><a href="#sql-vs-nosql-decision-matrix" class="header-anchor">SQL vs. NoSQL Decision Matrix</a></h2>
<p>No single database fits every use case. Use this matrix to guide your decision.</p>
<table>
<thead>
<tr>
<th style="text-align:left">Feature</th>
<th style="text-align:left"><strong>Relational (SQL)</strong></th>
<th style="text-align:left"><strong>Non-Relational (NoSQL)</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>Structure</strong></td>
<td style="text-align:left">Rigid Schema (Tables, Rows, Columns, Foreign Keys).</td>
<td style="text-align:left">Flexible Schema (Documents, Key-Value, Graphs).</td>
</tr>
<tr>
<td style="text-align:left"><strong>Scaling</strong></td>
<td style="text-align:left">Vertical scaling (bigger machine) is easiest. Horizontal scaling (sharding) is complex and often manual.</td>
<td style="text-align:left">Horizontal scaling (sharding) is often built-in and seamless across commodity hardware.</td>
</tr>
<tr>
<td style="text-align:left"><strong>Consistency</strong></td>
<td style="text-align:left"><strong>ACID</strong> (Strong Consistency). Crucial for transactions.</td>
<td style="text-align:left"><strong>BASE</strong> (Eventual Consistency) <em>mostly</em>. Prioritizes availability.</td>
</tr>
<tr>
<td style="text-align:left"><strong>Querying</strong></td>
<td style="text-align:left">Powerful SQL (JOINs, Aggregations).</td>
<td style="text-align:left">Varies (JSON-based, simple lookups). JOINs often handled in app code.</td>
</tr>
<tr>
<td style="text-align:left"><strong>Best For</strong></td>
<td style="text-align:left">Financials, Inventory, Structured Data, Complex Reporting.</td>
<td style="text-align:left">Massive Scale, Unstructured inputs, Rapid prototyping, Real-time feeds.</td>
</tr>
</tbody>
</table>
<h2 tabindex="-1" id="-postgresql-vs-mongodb"><a href="#-postgresql-vs-mongodb" class="header-anchor"> PostgreSQL vs. MongoDB</a></h2>
<h3 tabindex="-1" id="postgresql-the-reliable-workhorse-"><a href="#postgresql-the-reliable-workhorse-" class="header-anchor">PostgreSQL (The Reliable Workhorse)</a></h3>
<ul>
<li><strong>When to use</strong>:
<ul>
<li>Data integrity is paramount (e.g., financial transactions).</li>
<li>You have complex relationships (Users -&gt; Orders -&gt; Items -&gt; Invoices).</li>
<li>You need strict ACID compliance.</li>
<li>You need advanced geospatial queries (PostGIS).</li>
</ul>
</li>
<li><strong>JSON capabilities</strong>: Postgres has <code>JSONB</code>! You can store document interactions <em>within</em> a relational table. This effectively makes Postgres a hybrid database, often eliminating the need for MongoDB in diverse use cases.</li>
<li><strong>Limitations</strong>: Harder to write-scale massively (millions of writes/sec) compared to Mongo/Cassandra without complex partitioning or extensions like Citus.</li>
</ul>
<h3 tabindex="-1" id="mongodb-the-flexible-scaler-"><a href="#mongodb-the-flexible-scaler-" class="header-anchor">MongoDB (The Flexible Scaler)</a></h3>
<ul>
<li><strong>When to use</strong>:
<ul>
<li>Your schema changes frequently or is unknown upfront.</li>
<li>You have deep, nested documents that are usually read together.</li>
<li>You need massive <strong>Write</strong> throughput that exceeds the capacity of a single Postgres node.</li>
<li>You need built-in sharding and high availability with Replica Sets.</li>
</ul>
</li>
<li><strong>The Trap</strong>: Dont use it just because you dont want to enforce a schema. Schema-less usually means Implicit Schema that breaks your code later.</li>
<li><strong>Real-Life Failure</strong>: Using MongoDB for financial ledgers. Eventually, you will need multi-document transactions (which Mongo <em>can</em> do now, but its not its native strength) and complex reporting joins, leading to performance pain.</li>
</ul>
<h2 tabindex="-1" id="-cassandra-wide-column-stores"><a href="#-cassandra-wide-column-stores" class="header-anchor"> Cassandra &amp; Wide-Column Stores</a></h2>
<p><strong>The Discord Example</strong>
Cassandra is designed for <strong>Writes</strong>. Massive, relentless streams of writes (e.g., Logs, Chat history, IoT sensor data).</p>
<ul>
<li><strong>Architecture</strong>: Distributed Hash Table (DHT). No Master node; all nodes are peers. Data is replicated across N nodes (tunable consistency).</li>
<li><strong>Trade-off</strong>: Querying is very limited. You can query <em>only</em> by the Primary Key (Partition Key + Clustering Key). No <code>JOIN</code>s. No <code>WHERE</code> clauses on non-indexed columns (efficiently). You must model your data <em>based on your queries</em>.</li>
</ul>
<h3 tabindex="-1" id="case-study-discord-s-migration"><a href="#case-study-discord-s-migration" class="header-anchor">Case Study: Discords Migration</a></h3>
<ul>
<li><strong>Initial State</strong>: Used Cassandra to store billions of chat messages.</li>
<li><strong>Problem</strong>: <strong>Hot Partitions</strong>. Everyone talking in one popular channel created deep queues on specific nodes (partitions), causing latency spikes. Cassandras read performance suffered as partitions grew large.</li>
<li><strong>Migration</strong>: Moved to <strong>ScyllaDB</strong> (a C++ rewrite of Cassandra) combined with a custom Rust data layer.</li>
<li><strong>Solution Elements</strong>:
<ul>
<li><strong>Request Coalescing</strong>: Grouping multiple requests for the same partition.</li>
<li><strong>ScyllaDB</strong>: Better handling of large partitions and lower garbage collection pause times (since C++ has no GC).</li>
</ul>
</li>
<li><strong>Lesson</strong>: Even highly scalable databases like Cassandra have physical limits (Hot Partitions). Understanding data access patterns is critical.</li>
</ul>
<h2 tabindex="-1" id="-interview-q-a"><a href="#-interview-q-a" class="header-anchor"> Interview Q&amp;A</a></h2>
<p><strong>Interviewer: Design the data layer for a user profile system where fields change often (social links, bio, themes).</strong></p>
<p><strong>Candidate:</strong>
"For a user profile with a flexible schema, I would choose a <strong>Document Store (NoSQL)</strong> like <strong>MongoDB</strong> or <strong>DynamoDB</strong>.</p>
<ul>
<li><strong>Why</strong>: Users might have different fields (some have Twitter, some have BlueSky). A rigid SQL schema would require frequent <code>ALTER TABLE</code> migrations or many sparsely populated columns. A JSON document structure aligns perfectly with the object model."</li>
</ul>
<p><strong>Interviewer: We are building a stock trading engine. We need to handle millions of transactions per second with zero data loss. Speed is key.</strong></p>
<p><strong>Candidate:</strong>
"Be careful with the word Speed. For a trading engine:</p>
<ol>
<li><strong>Order Matching</strong>: This needs extreme low latency. I would use an <strong>In-Memory</strong> structure (like a custom engine or Redis) for the order book.</li>
<li><strong>Ledger (Ownership)</strong>: This needs strict <strong>ACID Consistency</strong>. You cannot have eventual consistency in valid ownership. I would use a specialized high-performance SQL layer (like <strong>PostgreSQL</strong> or <strong>TimescaleDB</strong> for tick data) or a dedicated ledger database (like <strong>TigerBeetle</strong>) that prioritizes consistency over availability (CP system).</li>
<li>I would <strong>never</strong> use MongoDB or Cassandra for the core ledger due to their default eventual consistency models."</li>
</ol>
<p><strong>Interviewer: We need to store Who follows whom for 1 Billion users. We need to find Friends of Friends of Friends efficiently.</strong></p>
<p><strong>Candidate:</strong>
"This is a classic Graph Traversal problem.</p>
<ul>
<li><strong>SQL Impact</strong>: Doing <code>JOIN</code>s on a <code>Followers</code> table 3 levels deep (<code>A-&gt;B-&gt;C-&gt;D</code>) is exponentially expensive ($O(log n)$ searches repeated) and will kill the DB.</li>
<li><strong>Solution</strong>: Use a <strong>Graph Database</strong> like <strong>Neo4j</strong> or <strong>Amazon Neptune</strong>.</li>
<li><strong>Why</strong>: Graph DBs store relationships as direct pointers (physical adjacency). A 3-hop query is just following 3 pointers, which is constant time $O(1)$ relative to the total dataset size."</li>
</ul>
<p><strong>Interviewer: We deploy 10,000 IoT sensors. Each sends temperature every second. We need to graph the average temperature per minute.</strong></p>
<p><strong>Candidate:</strong>
"This is a <strong>Time-Series</strong> problem.</p>
<ul>
<li><strong>Volume</strong>: 10k * 60 = 600,000 writes/minute. A standard Relational DB might choke on the indexing overhead.</li>
<li><strong>Pattern</strong>: Write-heavy (Append only), Read-heavy (Aggregations over time ranges).</li>
<li><strong>Solution</strong>: <strong>TimescaleDB</strong> (Postgres extension) or <strong>InfluxDB</strong>.</li>
<li><strong>Why</strong>: They are optimized for high-volume ingestion and have built-in functions for downsampling (automatic rollups) to query averages quickly without scanning billions of rows."</li>
</ul>

        </main>
    </div>

    <div id="mobile-toc-panel" class="hidden fixed inset-y-0 left-0 z-[60] w-72 sm:w-80 bg-white dark:bg-slate-800 shadow-xl transform -translate-x-full transition-transform duration-300 ease-in-out lg:hidden p-6 overflow-y-auto scrollbar-thin scrollbar-thumb-slate-300 dark:scrollbar-thumb-slate-600 scrollbar-track-transparent">
        <div class="flex justify-between items-center mb-6">
            <h2 class="text-lg font-semibold text-slate-800 dark:text-slate-100">Table of Contents</h2>
            <button id="closeMobileMenuButton" aria-label="Close table of contents" class="p-2 -mr-2 rounded-md text-slate-500 dark:text-slate-400 hover:bg-gray-200 dark:hover:bg-slate-700">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
            </button>
        </div>
        <div class="toc-container">
             <div class="toc"><ul><li class="toc-item toc-level-1"><a class="toc-link" href="#chapter-3-data-architecture-deep-dive">Chapter 3: Data Architecture Deep Dive</a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sql-vs-nosql-decision-matrix">SQL vs. NoSQL Decision Matrix</a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#-postgresql-vs-mongodb"> PostgreSQL vs. MongoDB</a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#postgresql-the-reliable-workhorse-">PostgreSQL (The Reliable Workhorse)</a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mongodb-the-flexible-scaler-">MongoDB (The Flexible Scaler)</a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#-cassandra-wide-column-stores"> Cassandra &amp; Wide-Column Stores</a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#case-study-discord-s-migration">Case Study: Discords Migration</a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#-interview-q-a"> Interview Q&amp;A</a></li></ul></div>
        </div>
    </div>
    <div id="mobile-toc-overlay" class="fixed inset-0 z-[55] bg-black bg-opacity-50 hidden transition-opacity duration-300 ease-in-out lg:hidden"></div>

    <footer class="mt-auto py-6 sm:py-8 border-t border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800 transition-colors duration-300">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 flex flex-col sm:flex-row justify-between items-center space-y-4 sm:space-y-0 max-w-4xl">
            <div class="flex-1 text-left text-sm">
                <span class="nav-link-item"><a href="chapter2-core-concepts.html" class="nav-link">Previous</a></span>
            </div>
            <div class="flex-1 text-center text-sm">
                <span class="nav-link-item"><a href="index.html" class="nav-link">Table of Contents</a></span>
            </div>
            <div class="flex-1 text-right text-sm">
                <span class="nav-link-item"><a href="chapter4-architectural-patterns.html" class="nav-link">Next</a></span>
            </div>
        </div>
    </footer>

    <button id="scrollToTopBtn" title="Scroll to top">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg>
    </button>

    <script>
        // Dark Mode
        const themeToggleDarkIcon = document.getElementById('theme-toggle-dark-icon');
        const themeToggleLightIcon = document.getElementById('theme-toggle-light-icon');
        const darkModeToggle = document.getElementById('darkModeToggle');
        function updateIcons(isDark) {
            if (!themeToggleDarkIcon || !themeToggleLightIcon) return;
            if (isDark) { themeToggleLightIcon.classList.remove('hidden'); themeToggleDarkIcon.classList.add('hidden'); } 
            else { themeToggleDarkIcon.classList.remove('hidden'); themeToggleLightIcon.classList.add('hidden'); }
        }
        function applyTheme(isDark) {
            if (isDark) { document.documentElement.classList.add('dark'); } 
            else { document.documentElement.classList.remove('dark'); }
            updateIcons(isDark);
            try { localStorage.setItem('color-theme', isDark ? 'dark' : 'light'); } catch (e) {}
        }
        let initialUserPrefersDark = false;
        try {
            const storedUserTheme = localStorage.getItem('color-theme');
            if (storedUserTheme) { initialUserPrefersDark = storedUserTheme === 'dark'; } 
            else { initialUserPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches; }
        } catch(e) { initialUserPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches; }
        applyTheme(initialUserPrefersDark);
        if (darkModeToggle) {
            darkModeToggle.addEventListener('click', () => {
                applyTheme(!document.documentElement.classList.contains('dark'));
            });
        }
        try {
            window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
                if (localStorage.getItem('color-theme') === null) { applyTheme(e.matches); }
            });
        } catch(e) {}

        // Sticky Header Height
        const pageHeader = document.getElementById('page-header');
        function updateHeaderHeightProperty() {
            if (pageHeader) { document.documentElement.style.setProperty('--header-height', `${pageHeader.offsetHeight}px`); }
            else { document.documentElement.style.setProperty('--header-height', `60px`); }
        }
        window.addEventListener('load', updateHeaderHeightProperty);
        window.addEventListener('resize', updateHeaderHeightProperty);
        updateHeaderHeightProperty();

        // Mobile TOC
        const mobileMenuButton = document.getElementById('mobileMenuButton');
        const closeMobileMenuButton = document.getElementById('closeMobileMenuButton');
        const mobileTocPanel = document.getElementById('mobile-toc-panel');
        const mobileTocOverlay = document.getElementById('mobile-toc-overlay');
        // Define functions in outer scope
        let openMobileToc, closeMobileToc;

        if (mobileMenuButton && mobileTocPanel && closeMobileMenuButton && mobileTocOverlay) {
            const SIDEBAR_VISIBLE_KEY = 'mobileSidebarVisible';

            openMobileToc = () => {
                console.log('Opening mobile TOC');
                mobileTocPanel.classList.remove('hidden');
                mobileTocPanel.classList.remove('-translate-x-full');
                mobileTocPanel.classList.add('translate-x-0');
                mobileTocOverlay.style.display = 'block';
                setTimeout(() => {
                    mobileTocOverlay.classList.add('opacity-100');
                }, 10);
                document.body.classList.add('overflow-hidden-important');
                localStorage.setItem(SIDEBAR_VISIBLE_KEY, 'true');
            };

            closeMobileToc = () => {
                console.log('Closing mobile TOC');
                mobileTocPanel.classList.add('hidden');
                mobileTocPanel.classList.add('-translate-x-full');
                mobileTocPanel.classList.remove('translate-x-0');
                mobileTocOverlay.classList.remove('opacity-100');
                setTimeout(() => {
                    mobileTocOverlay.style.display = 'none';
                }, 300);
                document.body.classList.remove('overflow-hidden-important');
                localStorage.setItem(SIDEBAR_VISIBLE_KEY, 'false');
            };

            mobileMenuButton.addEventListener('click', () => {
                if (openMobileToc) openMobileToc();
            });
            
            closeMobileMenuButton.addEventListener('click', () => {
                if (closeMobileToc) closeMobileToc();
            });
            
            mobileTocOverlay.addEventListener('click', () => {
                if (closeMobileToc) closeMobileToc();
            });

            if (mobileTocPanel) {
                mobileTocPanel.querySelectorAll('a').forEach(link => {
                    link.addEventListener('click', () => {
                        setTimeout(() => {
                            if (closeMobileToc) closeMobileToc();
                        }, 150);
                    });
                });
            }

            const savedSidebarState = localStorage.getItem(SIDEBAR_VISIBLE_KEY);
            if (savedSidebarState === 'true' && openMobileToc) {
                openMobileToc();
            }
        }

        // Convert nested TOC lists to collapsible sections and add scroll highlighting
        function makeTocCollapsible(tocContainer) {
            if (!tocContainer) return;
            
            // Find all list items that contain nested lists
            const itemsWithNestedLists = tocContainer.querySelectorAll('li:has(ul)');
            
            itemsWithNestedLists.forEach(item => {
                const link = item.querySelector('a');
                const nestedList = item.querySelector('ul');
                
                if (link && nestedList) {
                    // Create details/summary elements
                    const details = document.createElement('details');
                    const summary = document.createElement('summary');
                    
                    // Move link into summary
                    summary.appendChild(link);
                    details.appendChild(summary);
                    details.appendChild(nestedList);
                    
                    // Replace original li with new structure
                    item.replaceChildren(details);
                    
                    // Set initial open state for desktop
                    if (window.innerWidth >= 1024) {
                        details.open = true;
                    }
                }
            });

            // Add scroll highlighting if we have TOC data
            try {
                const tocData = JSON.parse(document.querySelector('script[type="application/json"]#toc-data')?.textContent || '[]');
                if (tocData.length > 0) {
                    const headerElements = tocData.map(item =>
                        document.getElementById(item.anchor)
                    ).filter(Boolean);

                    const tocLinks = tocContainer.querySelectorAll('a[href^="#"]');
                    
                    function updateActiveTocLink() {
                        const scrollPosition = window.scrollY + (pageHeader?.offsetHeight || 60) + 16;
                        
                        // Find which section is currently in view
                        let activeIndex = 0;
                        for (let i = 0; i < headerElements.length; i++) {
                            if (headerElements[i].offsetTop <= scrollPosition) {
                                activeIndex = i;
                            } else {
                                break;
                            }
                        }
                        
                        // Update TOC links
                        tocLinks.forEach(link => link.classList.remove('active'));
                        if (tocLinks[activeIndex]) {
                            tocLinks[activeIndex].classList.add('active');
                            
                            // Ensure parent details are open
                            let parentDetails = tocLinks[activeIndex].closest('details');
                            while (parentDetails) {
                                parentDetails.open = true;
                                parentDetails = parentDetails.parentElement.closest('details');
                            }
                        }
                    }
                    
                    window.addEventListener('scroll', updateActiveTocLink);
                    updateActiveTocLink();
                }
            } catch (e) {
                console.error('Error setting up TOC highlighting:', e);
            }
        }
        
        // Initialize collapsible TOC for both desktop and mobile
        document.querySelectorAll('.toc-container').forEach(makeTocCollapsible);
        
        // Smooth scroll for TOC links
        document.querySelectorAll('.toc-container a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const targetId = this.getAttribute('href');
                const targetElement = document.getElementById(targetId.substring(1));
                if (targetElement) {
                    const headerOffset = pageHeader ? pageHeader.offsetHeight : 60;
                    const elementPosition = targetElement.getBoundingClientRect().top;
                    const offsetPosition = elementPosition + window.pageYOffset - headerOffset - 16;
                    window.scrollTo({ top: offsetPosition, behavior: "smooth" });
                }
            });
        });

        // Scroll to Top Button
        const scrollToTopBtn = document.getElementById('scrollToTopBtn');
        if (scrollToTopBtn) {
            window.addEventListener('scroll', () => {
                if (window.pageYOffset > 300) { // Show after 300px scroll
                    scrollToTopBtn.classList.add('visible');
                } else {
                    scrollToTopBtn.classList.remove('visible');
                }
            });
            scrollToTopBtn.addEventListener('click', () => {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
        }

        // runCode function (existing)
        async function runCode(codeElementId, outputElementId, language) {
            const codeElement = document.getElementById(codeElementId);
            const outputElement = document.getElementById(outputElementId);
            if (!codeElement || !outputElement) {
                console.error("Code or output element not found for", codeElementId, outputElementId);
                return;
            }
            const code = codeElement.textContent;
            outputElement.innerHTML = '<span class="text-gray-500 dark:text-gray-400">Running...</span>';
            try {
                if (language === 'go') {
                    if (!window.Go) {
                        await new Promise((resolve, reject) => {
                            const script = document.createElement('script'); script.src = '../wasm/wasm_exec.js';
                            script.onload = resolve; script.onerror = reject; document.head.appendChild(script);
                        });
                    }
                    if (!window.goRunnerInstance) {
                        const go = new Go();
                        const result = await WebAssembly.instantiateStreaming(fetch('../wasm/go_runner.wasm'), go.importObject);
                        window.goRunnerInstance = result.instance; go.run(window.goRunnerInstance); 
                    }
                    outputElement.innerHTML = '<span class="text-gray-500 dark:text-gray-400">Executing Go code...</span>';
                    const result = await window.executeGoCode(code);
                    if (result.error) { outputElement.innerHTML = `<pre class="text-red-500 dark:text-red-400">Error:\n${result.error}</pre>`; }
                    else { outputElement.innerHTML = `<pre class="text-green-600 dark:text-green-400">Output:\n${result.output}</pre>`; }
                } else if (language === 'csharp') {
                    if (!window.csharpWasmRuntimeStarted) {
                        outputElement.innerHTML = '<span class="text-gray-500 dark:text-gray-400">Loading .NET Wasm runtime...</span>';
                        try {
                            if (!document.querySelector('script[src="../wasm/csharp/blazor.webassembly.js"]')) {
                                const script = document.createElement('script'); script.src = '../wasm/csharp/blazor.webassembly.js';
                                script.defer = true; document.body.appendChild(script);
                                await new Promise((resolve, reject) => {
                                    const checkInterval = setInterval(() => { if (window.DotNet && typeof window.DotNet.invokeMethodAsync === 'function') { clearInterval(checkInterval); resolve();}}, 100);
                                    setTimeout(() => { clearInterval(checkInterval); reject(new Error('.NET runtime loading timed out.')); }, 30000);
                                });
                            } else {
                                 await new Promise((resolve, reject) => { 
                                    const checkInterval = setInterval(() => { if (window.DotNet && typeof window.DotNet.invokeMethodAsync === 'function') { clearInterval(checkInterval); resolve(); }}, 100);
                                     setTimeout(() => { clearInterval(checkInterval); reject(new Error('.NET runtime already loaded but not ready.'));}, 30000);
                                });
                            }
                            window.csharpWasmRuntimeStarted = true;
                             outputElement.innerHTML = '<span class="text-green-600 dark:text-green-400">.NET Wasm runtime loaded.</span>';
                        } catch (loadError) {
                            console.error("Error loading .NET Wasm runtime:", loadError);
                            outputElement.innerHTML = `<pre class="text-red-500 dark:text-red-400">Error loading .NET Wasm runtime:\n${loadError.message || loadError}</pre>`;
                            return;
                        }
                    }
                    try {
                        outputElement.innerHTML = '<span class="text-gray-500 dark:text-gray-400">Executing C# code...</span>';
                        if (!(window.DotNet && typeof window.DotNet.invokeMethodAsync === 'function')) {
                            outputElement.innerHTML = `<pre class="text-red-500 dark:text-red-400">.NET runtime not available for invoking method.</pre>`; return;
                        }
                        const result = await window.DotNet.invokeMethodAsync('CSharpWasmRunner', 'ExecuteCodeAsync', code);
                        if (result.error) { outputElement.innerHTML = `<pre class="text-red-500 dark:text-red-400">Error:\n${result.error}</pre>`; }
                        else { outputElement.innerHTML = `<pre class="text-green-600 dark:text-green-400">Output:\n${result.output}</pre>`; }
                    } catch (execError) {
                        console.error("Error executing C# code:", execError);
                        outputElement.innerHTML = `<pre class="text-red-500 dark:text-red-400">Error executing C# code:\n${execError.message || execError}</pre>`;
                    }
                } else {
                    outputElement.innerHTML = `<p class="text-yellow-500 dark:text-yellow-400">Execution for ${language} is not supported.</p>`;
                }
            } catch (error) {
                outputElement.innerHTML = `<pre class="text-red-500 dark:text-red-400">Error:\n${error.message}</pre>`;
                console.error('Code execution error:', error);
            }
        }
    </script>
</body>
</html>